# Small HDF5 Reader/Writer

Simple library to read HDF5 files generated by Gadget/GIZMO/Arepo. Loads all of the header information from a single file and any specified particle information into a dictionary. It can read multiple files and will combine the data into single numpy arrays.

## Installation

Go into the main directory and run the following:

    python setup.py build && python setup.py install

## Examples

### Reading
Read the **PartType0/Masses** array split across 8 files:

    from gizmorw import read_gizmo_file
    
    file_name = 'file_name' # no .hdf5 extension, it assumes .hdf5
    nfiles = 1
    headers, part_dict = read_gizmo_file(file_name, nfiles, part_type = 0, part_keys = ['Masses'])

In this case, **part_dict** is a dictionary with a single key **PartType0**.
    
### Writing
Writing the **PartType0/Masses** array to 8 new files:

    from gizmorw import read_gizmo_file, write_gizmo_file
    
    file_name = 'file_name' # no .hdf5 extension, it assumes .hdf5
    headers, part_dict = read_gizmo_file(file_name, nfiles, part_type = 0, part_keys = ['Masses'])
   
    new_file_name = 'file_name_copy'
    new_nfiles = 8

	# For now, assume it is perfectly divisible by 8
    headers['NumPart_ThisFile'] = headers['NumPart_Total'] // 8
    headers['NumFilesPerSnapshot'] = new_nfiles
    
    write_gizmo_file(new_file_name, new_nfiles, headers, part_dict)

### Splicing

Sometimes it is useful to go from a large number of files to a single HDF5 file. For example, if you want to convert any initial conditions generated to be used by the SWIFT hydrodynamics code, that requires a single HDF5 file.

    from gizmorw import read_gizmo_file, write_gizmo_file
    
    input_file = 'ics_file' # no .hdf5 extension
    input_nfiles = 8
    output_file = 'ics_file_spliced'
    
    headers, part_dict = read_gizmo_file(input_file, input_nfiles, \
                                         part_types = [0, 1, 2], 
	                                     part_keys = ['ParticleIDs', 'Masses', 'Coordinates', 'Velocities'])

    headers['NumPart_ThisFile'] = headers['NumPart_Total']
    headers['NumFilesPerSnapshot'] = 1

    write_gizmo_file(output_file, 1, headers, part_dict)

